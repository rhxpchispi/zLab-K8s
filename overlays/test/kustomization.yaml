bases:
  - ../../base
  
patches:
  - target:
      kind: Deployment
      name: java-app
    patch: |-
        - op: replace
          path: /spec/replicas
          value: 2
  - target:
      kind: Service
      name: java-app-service
    patch: |
      - op: replace
        path: /spec/ports/0/nodePort
        value: 30002

configMapGenerator:
  - name: app-config
    namespace: test-ns
    literals:
      - APP_ENV=testing
      - WELCOME_MESSAGE=Bienvenido al Ambiente de Testing
      - VERSION=1.0.0-test
      - API_URL=http://test-api.example.com
      - APP_COLOR=lightblue
    options:
      disableNameSuffixHash: true

images:
  - name: rhxpchispi/zlab-java-app
    newTag: test-latest

namespace: test-ns